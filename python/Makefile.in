# Makefile to compile the module in this directory

SOURCES = $(wildcard *.i) $(wildcard *.cpp)
LIBRARIES = _rdfamodule
DYNAMIC_LINK_LIBRARIES = expat 
DYNAMIC_WINDOWS_LIBRARIES = 

# ----------- Standard Makefile
#include @RDFADIR@/setup/Makefile.base

all: $(SOURCES)
	mkdir -p build/linux
	mkdir -p dist/linux
	swig -c++ -I. -python -o build/linux/SwigRdfaParser.cpp rdfa.i
	cp build/linux/rdfa.py dist/linux
	-cd build/linux && ln -s ../../RdfaParser.cpp RdfaParser.cpp
	g++ -c -I../c -I. -I/usr/include/python2.4 build/linux/RdfaParser.cpp -o build/linux/RdfaParser.o
	g++ -c -I../c -I. -I/usr/include/python2.4 build/linux/SwigRdfaParser.cpp -o build/linux/SwigRdfaParser.o
	g++ -shared -L ../libs/linux -o dist/linux/_rdfa.so build/linux/RdfaParser.o build/linux/SwigRdfaParser.o -lrdfa

clean:
	rm -rf build/*
	rm -rf dist/*
